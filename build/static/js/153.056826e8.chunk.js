"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[153],{2118:function(e,s,a){a.d(s,{Z:function(){return c}});var n=a(9439),t=a(2791),i=a(5827),l=a.n(i),r=a(184),c=function(e){var s=e.handleFile,a=e.displayImage,i=e.defaultImageURL,c=(0,t.useState)(""),u=(0,n.Z)(c,2),d=u[0],f=u[1],o=(0,t.useRef)(null);(0,t.useEffect)((function(){i&&f(i)}),[i]);return(0,r.jsxs)("div",{className:"imageUpload",children:[(0,r.jsx)("div",{className:"uploadFile",children:(0,r.jsx)("button",{onClick:function(){var e;null===(e=o.current)||void 0===e||e.click()},children:"Th\xeam \u1ea3nh"})}),(0,r.jsx)("input",{type:"file",ref:o,style:{display:"none"},onChange:function(e){var a,n=null===(a=e.target.files)||void 0===a?void 0:a[0];n&&(new(l())(n,{quality:.8,success:function(e){s(n)}}),f(URL.createObjectURL(n)))}}),a&&(0,r.jsx)("div",{className:"imagePreview",children:d&&(0,r.jsx)("img",{width:300,height:300,src:d,alt:"postPicture"})})]})}},9153:function(e,s,a){a.r(s),a.d(s,{default:function(){return b}});var n=a(9439),t=a(2791),i=a(2118),l=a(4165),r=a(5861),c=a(8501),u=a(8931),d=a(184),f=function(e){var s=e.user,a=(0,t.useState)([]),i=(0,n.Z)(a,2),f=i[0],o=i[1];return(0,t.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,l.Z)().mark((function e(){var a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.getByUserId(s.id);case 3:a=e.sent,o(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error fetching user`s posts");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[s]),(0,d.jsx)("div",{className:"userPostList",children:f.length>0?f.map((function(e){return(0,d.jsx)("div",{className:"userPostListItem",children:(0,d.jsx)(c.Z,{post:e})},e.id)})):(0,d.jsx)("div",{className:"noPostsCreatedByUser",children:"B\u1ea1n ch\u01b0a t\u1ea1o Blog n\xe0o"})})},o=a(5405),m=a(4942),p=a(1413),h=a(4418),v=a(5671),x=a(3144),j=a(5229),N=function(){function e(){(0,v.Z)(this,e)}return(0,x.Z)(e,null,[{key:"updateUser",value:function(){var e=(0,r.Z)((0,l.Z)().mark((function e(s,a,n,t,i){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("userId",s.toString()),r.append("firstName",a),r.append("lastName",n),r.append("email",t),i&&(console.log("picture"),r.append("picture",i)),e.abrupt("return",j.Z.put("/auth/update",r));case 7:case"end":return e.stop()}}),e)})));return function(s,a,n,t,i){return e.apply(this,arguments)}}()}]),e}(),g=a(4888),Z=function(e){var s=e.file,a=e.setFile,i=(0,o.TL)(),l=(0,o.CG)((function(e){return e.auth})).user,r=(0,t.useState)({firstName:"",lastName:"",email:""}),c=(0,n.Z)(r,2),u=c[0],f=c[1],v=(0,t.useState)(""),x=(0,n.Z)(v,2),j=x[0],Z=x[1];(0,t.useEffect)((function(){a(null),Object.keys(l).length>0&&f((0,p.Z)({},l))}),[l,a]);var b=function(e){f((0,p.Z)((0,p.Z)({},u),{},(0,m.Z)({},e.target.name,e.target.value)))};return(0,d.jsxs)("form",{className:"editProfileForm",children:[(0,d.jsxs)("label",{className:"field field_v2",children:[(0,d.jsx)("input",{name:"firstName",value:u.firstName,onChange:b,className:"field__input"}),(0,d.jsx)("span",{className:"field__label-wrap",children:(0,d.jsx)("span",{className:"field__label",children:"First name"})})]}),(0,d.jsxs)("label",{className:"field field_v2",children:[(0,d.jsx)("input",{name:"lastName",value:u.lastName,onChange:b,className:"field__input"}),(0,d.jsx)("span",{className:"field__label-wrap",children:(0,d.jsx)("span",{className:"field__label",children:"Last name"})})]}),(0,d.jsxs)("label",{className:"field field_v2",children:[(0,d.jsx)("input",{name:"email",value:u.email,onChange:b,className:"field__input"}),(0,d.jsx)("span",{className:"field__label-wrap",children:(0,d.jsx)("span",{className:"field__label",children:"Email"})})]}),(0,d.jsxs)("div",{className:"submitProfileChanges",children:[(0,d.jsx)("div",{className:"profileSaveBtn",children:(0,d.jsx)(h.Z,{handleClick:function(e){e.preventDefault(),Z(""),l.firstName!==u.firstName||l.lastName!==u.lastName||l.email!==u.email||s?N.updateUser(l.id,u.firstName,u.lastName,u.email,s).then((function(e){i((0,g.av)(e.data)),Z("Changes saved!")})).catch((function(e){return Z(e.message)})):Z("Please edit fields!")},type:"submit",text:"L\u01b0u"})}),j&&(0,d.jsx)("span",{className:"Changes saved!"===j?"submitSuccess":"submitError",children:j})]})]})},b=function(){var e=(0,o.CG)((function(e){return e.auth})).user,s=(0,t.useState)(null),a=(0,n.Z)(s,2),l=a[0],r=a[1];return(0,d.jsxs)("div",{className:"profileWrapper",children:[(0,d.jsxs)("div",{className:"profile",children:[(0,d.jsxs)("h1",{children:["H\u1ed3 s\u01a1 ",e.firstName," ",e.lastName]}),(0,d.jsxs)("div",{className:"profileInfo",children:[(0,d.jsxs)("div",{className:"profileLeft",children:[(0,d.jsx)("div",{className:"profileImage",children:(0,d.jsx)("img",{src:l?URL.createObjectURL(l):e.profilePicture,alt:"profileAvatar"})}),(0,d.jsx)("div",{className:"profileImageUpload",children:(0,d.jsx)(i.Z,{displayImage:!1,handleFile:function(e){return r(e)}})})]}),(0,d.jsxs)("div",{className:"profileRight",children:[(0,d.jsx)("h3",{children:"Th\xf4ng tin"}),(0,d.jsx)("div",{className:"profileCredentials",children:(0,d.jsx)(Z,{setFile:r,file:l})})]})]})]}),(0,d.jsxs)("div",{className:"userPosts",children:[(0,d.jsx)("h3",{children:"B\xe0i vi\u1ebft \u0111\xe3 t\u1ea1o"}),Object.keys(e).length>0&&(0,d.jsx)(f,{user:e})]})]})}}}]);
//# sourceMappingURL=153.056826e8.chunk.js.map